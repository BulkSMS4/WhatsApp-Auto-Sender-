<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Admin Dashboard</title>
  <style>
    body {
      background: #121212;
      color: #fff;
      font-family: Arial, sans-serif;
      padding: 20px;
    }
    h1 {
      text-align: center;
      color: #00e676;
      margin-bottom: 20px;
    }
    label {
      display: block;
      margin-top: 10px;
      font-weight: bold;
    }
    input, select, textarea {
      width: 100%;
      padding: 10px;
      border-radius: 6px;
      border: none;
      margin-top: 5px;
      background: #1f1f1f;
      color: #fff;
    }
    button {
      background: #00e676;
      border: none;
      padding: 12px 20px;
      border-radius: 6px;
      color: #111;
      font-weight: bold;
      margin-top: 15px;
      cursor: pointer;
      transition: 0.3s;
    }
    button:hover {
      background: #00c853;
    }
    .hidden { display: none; }
    #conversionBox {
      margin-top: 15px;
      background: #1b1b1b;
      padding: 10px;
      border-radius: 6px;
      font-size: 15px;
    }
  </style>
</head>
<body>
  <h1>üßæ Admin Dashboard</h1>

  <form id="productForm">
    <label>Category</label>
    <select id="category" required>
      <option value="">Select Category</option>
      <option>Electronics</option>
      <option>Fashion</option>
      <option>Home</option>
      <option>Accessories</option>
      <option>Foods</option>
      <option>Rings</option>
      <option>Toys</option>
      <option>Cars</option>
      <option>Trucks</option>
      <option>Jobs</option>
    </select>

    <label>Title</label>
    <input type="text" id="title" required placeholder="e.g., Samsung 55&quot; Smart TV">

    <label>Description</label>
    <textarea id="desc" rows="3" required placeholder="Short product or job description here..."></textarea>

    <div id="locationContainer" class="hidden">
      <label>Job Location</label>
      <input type="text" id="location" placeholder="e.g. Accra, Ghana">
    </div>

    <label id="priceLabel">Price (USD)</label>
    <input type="number" id="price" placeholder="e.g. 49.99" required>

    <label>Website Link</label>
    <input type="url" id="site" placeholder="https://example.com/product">

    <div id="paymentContainer">
      <label>Payment Link</label>
      <input type="url" id="payment" placeholder="https://example.com/pay" />
    </div>

    <div id="applyContainer" class="hidden">
      <label>Custom Apply Form Link</label>
      <input type="url" id="applyForm" placeholder="https://example.com/apply-form" />
    </div>

    <label>Upload up to 20 Images</label>
    <input type="file" id="images" multiple accept="image/*">

    <label>Bulk Numbers</label>
    <textarea id="bulkNumbers" rows="3" placeholder="+233..., +234..., +144..."></textarea>

    <button type="submit">Send</button>
  </form>

  <div id="conversionBox">
    üåç <span id="country">Detecting country...</span><br>
    üí± <span id="currency">Currency: </span><br>
    üí∞ <span id="convertedPrice">Converted price will appear here.</span>
  </div>

  <script>
    const category = document.getElementById('category');
    const titleInput = document.getElementById('title');
    const descInput = document.getElementById('desc');
    const priceLabel = document.getElementById('priceLabel');
    const priceInput = document.getElementById('price');
    const siteInput = document.getElementById('site');
    const paymentContainer = document.getElementById('paymentContainer');
    const paymentInput = document.getElementById('payment');
    const applyContainer = document.getElementById('applyContainer');
    const applyFormInput = document.getElementById('applyForm');
    const locationContainer = document.getElementById('locationContainer');
    const convertedPrice = document.getElementById('convertedPrice');
    let detectedCurrency = "USD", exchangeRate = 1;

    const examples = {
      Electronics: {
        title: 'Samsung 55" QLED Smart TV - Model Q80T',
        desc: '55" 4K UHD Smart TV, HDMI x3, USB x2, 1yr warranty.',
        price: '899.00',
        site: 'https://mystore.com/samsung-q80t',
        payment: 'https://pay.example.com/pay/tv-q80t'
      },
      Fashion: {
        title: "Men's Leather Jacket - Black",
        desc: 'Genuine leather, available in all sizes (S-XXL).',
        price: '129.99',
        site: 'https://mystore.com/leather-jacket',
        payment: 'https://pay.example.com/pay/jacket'
      },
      Home: {
        title: 'Deluxe Blender 1500W',
        desc: '2L jar, 3 speed settings ‚Äî perfect for smoothies!',
        price: '59.99',
        site: 'https://mystore.com/blender',
        payment: 'https://pay.example.com/pay/blender'
      },
      Accessories: {
        title: 'Wireless Earbuds X200',
        desc: 'Noise cancelling, 24h battery, charging case.',
        price: '39.99',
        site: 'https://mystore.com/earbuds',
        payment: 'https://pay.example.com/pay/earbuds'
      },
      Foods: {
        title: 'Jollof Rice (1kg)',
        desc: 'Home-cooked, fresh ingredients, delivery available.',
        price: '6.50',
        site: 'https://mystore.com/jollof',
        payment: 'https://pay.example.com/pay/jollof'
      },
      Rings: {
        title: '14K Gold Engagement Ring',
        desc: '14K gold, sizes 6-9, includes certificate.',
        price: '249.00',
        site: 'https://mystore.com/14k-ring',
        payment: 'https://pay.example.com/pay/14k-ring'
      },
      Toys: {
        title: 'Remote Control Car - 4WD',
        desc: 'Ages 6+, rechargeable battery included.',
        price: '29.99',
        site: 'https://mystore.com/rc-car',
        payment: 'https://pay.example.com/pay/rc-car'
      },
      Cars: {
        title: 'Toyota Corolla 2018 - 50,000km',
        desc: 'Well maintained, single owner, full service history.',
        price: '8500.00',
        site: 'https://mystore.com/toyota-corolla-2018',
        payment: 'https://pay.example.com/pay/car123'
      },
      Trucks: {
        title: 'Isuzu NKR 2015 - Diesel',
        desc: '3-ton capacity, excellent condition, new tyres.',
        price: '12000.00',
        site: 'https://mystore.com/isuzu-nkr-2015',
        payment: 'https://pay.example.com/pay/truck123'
      },
      Jobs: {
        title: 'Warehouse Assistant (Full-Time)',
        desc: 'Assist in packaging, loading, and inventory.',
        price: '450.00',
        site: 'https://mystore.com/jobs/warehouse-assistant',
        applyForm: 'https://mystore.com/apply/warehouse'
      }
    };

    category.addEventListener('change', () => {
      const c = category.value;
      if (examples[c]) {
        titleInput.value = examples[c].title;
        descInput.value = examples[c].desc;
        priceInput.value = examples[c].price;
        siteInput.value = examples[c].site;
        if (examples[c].payment) paymentInput.value = examples[c].payment;
        if (examples[c].applyForm) applyFormInput.value = examples[c].applyForm;
      }

      if (c === 'Jobs') {
        priceLabel.textContent = 'Salary (USD)';
        locationContainer.classList.remove('hidden');
        paymentContainer.classList.add('hidden');
        applyContainer.classList.remove('hidden');
      } else {
        priceLabel.textContent = 'Price (USD)';
        locationContainer.classList.add('hidden');
        paymentContainer.classList.remove('hidden');
        applyContainer.classList.add('hidden');
      }

      updateConvertedPrice();
    });

    async function detectCountryCurrency() {
      try {
        const res = await fetch('https://ipapi.co/json/');
        const data = await res.json();
        document.getElementById('country').textContent = `Country: ${data.country_name}`;
        detectedCurrency = data.currency || "USD";
        document.getElementById('currency').textContent = `Currency: ${detectedCurrency}`;
        getExchangeRate();
      } catch {
        document.getElementById('country').textContent = 'Could not detect location';
      }
    }

    async function getExchangeRate() {
      try {
        const res = await fetch(`https://api.exchangerate.host/latest?base=USD`);
        const data = await res.json();
        exchangeRate = data.rates[detectedCurrency] || 1;
        updateConvertedPrice();
      } catch {
        convertedPrice.textContent = 'Error fetching rate';
      }
    }

    function updateConvertedPrice() {
      const usdValue = parseFloat(priceInput.value);
      if (!usdValue || isNaN(usdValue)) {
        convertedPrice.textContent = 'Enter a valid USD price above.';
        return;
      }
      const localAmount = (usdValue * exchangeRate).toFixed(2);
      convertedPrice.textContent = `$${usdValue} USD ‚âà ${localAmount} ${detectedCurrency}`;
    }

    priceInput.addEventListener('input', updateConvertedPrice);
    detectCountryCurrency();

    document.getElementById('productForm').addEventListener('submit', (e) => {
      e.preventDefault();
      alert('‚úÖ Product/Job details saved successfully.');
      // Here you‚Äôll connect to backend (server.js)
    });
  </script>
</body>
</html>
