<!doctype html>
<html>
<head>
  <meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Buyers â€” Admin</title>
  <style>
    :root{--accent:#25D366;--bg:#071016}
    body{margin:0;font-family:Inter,Arial,sans-serif;background:var(--bg);color:#fff}
    header{background:var(--accent);color:#002b14;padding:14px;text-align:center;font-weight:700}
    .wrap{max-width:1100px;margin:14px auto;padding:12px}
    .card{background:#071216;padding:12px;border-radius:10px;margin-bottom:12px}
    input,button{padding:8px;border-radius:8px;border:1px solid rgba(255,255,255,0.03);background:#071216;color:#fff}
    .small{color:#97a5ad}
    table{width:100%;border-collapse:collapse;margin-top:8px}
    th,td{padding:10px;border-bottom:1px solid rgba(255,255,255,0.03);text-align:left}
    .btn{background:var(--accent);border:none;padding:8px;border-radius:6px;color:#002b14;cursor:pointer}
  </style>
</head>
<body>
  <header>ðŸ‘¥ Buyers & Orders</header>
  <div class="wrap">
    <div class="card">
      <div style="display:flex;gap:8px">
        <input id="pass" placeholder="Admin password">
        <button id="loadBtn" class="btn">Load Buyers & Orders</button>
      </div>
      <div id="content" style="margin-top:12px"></div>
    </div>
  </div>

<script>
  document.getElementById('loadBtn').addEventListener('click', async ()=>{
    const pass = document.getElementById('pass').value.trim();
    if (!pass) return alert('Enter admin password');
    document.getElementById('content').textContent = 'Loading...';
    try {
      const pr = await fetch('/api/admin/orders?password='+encodeURIComponent(pass));
      const j = await pr.json();
      if (!j || !j.success) { document.getElementById('content').textContent = 'Failed to load orders'; return; }
      const rows = j.orders.map(o=>`<tr><td>${o.orderId}</td><td>${o.productTitle}</td><td>${o.name}</td><td>${o.phone}</td><td>${o.quantity}</td><td>${new Date(o.createdAt).toLocaleString()}</td></tr>`).join('');
      document.getElementById('content').innerHTML = `<table><thead><tr><th>OrderID</th><th>Product</th><th>Name</th><th>Phone</th><th>Qty</th><th>When</th></tr></thead><tbody>${rows}</tbody></table>`;
    } catch (e) { console.error(e); document.getElementById('content').textContent='Error'; }
  });
</script>
</body>
</html>
